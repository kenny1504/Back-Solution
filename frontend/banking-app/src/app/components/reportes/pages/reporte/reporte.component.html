<h2 class="page-title">Reporte de Movimientos</h2>
<div class="card modern-card">
  <div class="row mb-3">
    <div class="col-3">
      <label class="form-label">Desde</label>
      <input type="date" class="input form-control modern-input" [(ngModel)]="filtro.desde">
    </div>
    <div class="col-3">
      <label class="form-label">Hasta</label>
      <input type="date" class="input form-control modern-input" [(ngModel)]="filtro.hasta">
    </div>
    <div class="col-3">
      <label class="form-label">Cliente</label>
      <select id="ClienteId" class="input modern-input" [(ngModel)]="filtro.clienteId">
        <option *ngFor="let cliente of clientes" [value]="cliente.id">
          {{ cliente.nombre }}
        </option>
      </select>
    </div>
    <div class="col-3 d-flex align-items-end justify-content-end">
      <button class="btn btn-success modern-btn" (click)="buscar()">Buscar</button>
    </div>
  </div>

  <div #reporte>
    <table class="table modern-table" *ngIf="rows?.length">
      <thead>
      <tr>
        <th>Fecha</th>
        <th>Cuenta</th>
        <th>Concepto</th>
        <th class="text-end">Monto</th>
      </tr>
      </thead>
      <tbody>
      <tr *ngFor="let r of rows">
        <td>{{r.fecha | date:'yyyy-MM-dd'}}</td>
        <td>{{r.cuentaId}}</td>
        <td>{{r.concepto}}</td>
        <td class="text-end">{{r.monto | number:'1.2-2'}}</td>
      </tr>
      </tbody>
    </table>

    <div class="totales modern-total" *ngIf="rows?.length">
      Total movimientos: <strong>{{ total | number:'1.2-2' }}</strong>
    </div>
  </div>

  <div class="actions mt-3" *ngIf="rows?.length">
    <button class="btn outline modern-btn-outline" (click)="exportar()">Exportar PDF</button>
  </div>

  <div class="alert error modern-error" *ngIf="errorMsg">{{errorMsg}}</div>
  <div class="help mt-3" *ngIf="!rows?.length">Use los filtros y presione "Buscar".</div>
</div>
